package game.states;

import java.awt.Graphics2D;

import game.Game;
import game.utils.init.PreloadLevels;
import game.world.TileMap;

public class GameState implements State {
	
	private TileMap tileMap;
	private String currentLevel;
	private int levelInt;

	@Override
	public void init() {
		tileMap = PreloadLevels.tileMap;
		tileMap.load(PreloadLevels.levels.get(0));
		currentLevel = PreloadLevels.levels.get(0);
	}

	@Override
	public void enter() {
		tileMap.load(currentLevel);
	}

	@Override
	public void tick(StateManager stateManager) {
/*		for(Entity e : entities) {
			e.tick();
		}*/
		tileMap.tick();
	}

	@Override
	public void render(Graphics2D g) {
		tileMap.render(g, Game.WIDTH, Game.HEIGHT);
	}

	@Override
	public void exit() {
/*		entities.clear();*/
	}
	
	public void nextLevel() {
		tileMap.unload();
		tileMap.load(PreloadLevels.levels.get(++levelInt));
		currentLevel = PreloadLevels.levels.get(levelInt);
		tileMap.setEntityList(PreloadLevels.levelEntities.get(PreloadLevels.levels.get(levelInt)));
	}

	@Override
	public String getName() {
		return PreloadLevels.levels.get(levelInt);
	}	

}
